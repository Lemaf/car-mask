!function(){var a=function(a,b){a[0].onkeyup=this._eventKeyupHandler.bind(this,a[0],b)};a.prototype._execMask=function(a){return a=a.replace(/\W|_|\s/g,"").substr(0,41).toUpperCase(),this._getSiglaEstado(a)+this._getCodigoMunicipio(a)+this._getProtocolo(a)},a.prototype._getProtocolo=function(a){var b=a.replace(/^\w{9}/i,"").match(/\w{1,4}/gi);return b&&a.length>9?"-"+b.join("."):""},a.prototype._getCodigoMunicipio=function(a){var b=a.replace(/^\w{2}/i,"").match(/\d{1,7}/i);return b&&a.length>1?"-"+b.join():""},a.prototype._getSiglaEstado=function(a){var b=a.match(/^[a-z]{1,2}/i);return b?b.join():""},a.prototype._eventKeyupHandler=function(a,b,c){var d=String.fromCharCode(event.keyCode);if(d.match(/\w/)){var e=a.selectionStart,f=a.selectionEnd,g=a.value;a.value=this._execMask(a.value),c.ctrlKey&&d.match(/v/i)?a.setSelectionRange(a.value.length,a.value.length):(c.ctrlKey&&d.match(/a/i)||f<g.length)&&a.setSelectionRange(e,f),c.preventDefault()}},angular.module("carMask",[]).directive("carCodeMask",function(){return angular.extend({restrict:"A"},{require:"ngModel",scope:{model:"=ngModel"}},{controller:a,controllerAs:a})})}();