!function(){var e=function(e,t){e[0].onkeyup=this._eventKeyupHandler.bind(this,e[0],t)};e.prototype._execMask=function(e){return e=e.replace(/\W|_|\s/g,"").substr(0,41).toUpperCase(),this._getSiglaEstado(e)+this._getCodigoMunicipio(e)+this._getProtocolo(e)},e.prototype._getProtocolo=function(e){var t=e.replace(/^\w{9}/i,"").match(/\w{1,4}/gi);return t&&e.length>9?"-"+t.join("."):""},e.prototype._getCodigoMunicipio=function(e){var t=e.replace(/^\w{2}/i,"").match(/\d{1,7}/i);return t&&e.length>1?"-"+t.join():""},e.prototype._getSiglaEstado=function(e){var t=e.match(/^[a-z]{1,2}/i);return t?t.join():""},e.prototype._eventKeyupHandler=function(e,t,n){var o=event.key;if(o.match(/\w/)){var r=e.selectionStart,i=e.selectionEnd,a=e.value;e.value=this._execMask(e.value),n.ctrlKey&&o.match(/v/i)?e.setSelectionRange(e.value.length,e.value.length):(n.ctrlKey&&o.match(/a/i)||i<a.length)&&e.setSelectionRange(r,i),n.preventDefault()}},angular.module("carMask",[]).directive("carCodeMask",function(){return angular.extend({restrict:"A"},{require:"ngModel",scope:{model:"=ngModel"}},{controller:e,controllerAs:e})})}();